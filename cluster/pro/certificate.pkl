import "../../Settings.pkl" as Settings

apiVersion = "cert-manager.io/v1"
kind = "Certificate"
metadata {
  name = "pro-cert"
  namespace = "default"
}
spec {
  secretName = "pro-tls"
  duration = "2160h"
  renewBefore = "360h"
  commonName = Settings.ingresses["pro"].domain
  dnsNames {
    Settings.ingresses["pro"].domain
  }
  issuerRef {
    when (Settings.ingresses["pro"].tls.selfSigned)
    {
        name = "selfsigned-issuer"
    }
    else
    {
        name = "letsencrypt-issuer"
    }
    kind = "ClusterIssuer"
  }
}
